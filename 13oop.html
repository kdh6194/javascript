<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>자바스크립트 클래스</title>
</head>
<body>
    <h1>자바스크립트 클래스</h1>
    <h2>개요</h2>
    <p>OOP는 객체를 기반으로 프로그램을 설계하는 방식을 의미</p>
    <p>프로그램을 단순한 데이터(변수)와 처리방법(함수)으로 나누는 것보다
        하나의 객체에 모두 담아두고, 이들의 상호작용으로 서술하는 방식을 의미함</p>
    <p>OOP에서 객체를 생성하기 위한 가장 기본적인 요소는 바로 클래스임</p>

    <h2>클래스</h2>
    <p>특정 객체(붕어빵)를 생성하기 위해
        변수(재료)와 메서드(굽는시간)를
        정의하는 일종의 틀(붕어빵틀)</p>
    <p>객체는 정의하기 위한 상태(변수)와 행위(메서드)로 구성</p>
    <p>class 클래스명 { </p>
    <p> 변수들.. </p>
    <p> constructor() {} //생성자 </p>
    <p> setter/getter </p>
    <p> 메서드() {}</p>
    <p> } </p>
    <p>생성자 : 클래스내 맴버변수에 값을 초기화하는 특수한 함수</p>
    <script>
        class Hello {
            //맴버변수 선언X
            //this = {}; 시스템이 시작되면 자동 생성
            constructor(msg) {
                this.msg = msg;
            }//생성자
            sayhello() {
                document.write(`hello,${this.msg}<br>`);
            }
        }

        let say1 = new Hello(`java`);
        say1.sayhello();
        let say2 = new Hello(`HTML5`);
        say2.sayhello();
        let say3 = new Hello(`CSS3`);
        say3.sayhello();
    </script>

    <script>
        //case 1 : 아이디, 비번, 이름, 이메일을 저장하기 위한 변수를 선언하고
        //적절한 값을 초기화하세요
        class User {
            constructor(id, passwd,name,email) {
                this.id = id;
                this.passwd = passwd;
                this.name = name;
                this.email = email;
            }
            userinfo () {
                document.write(`아이디 : ${this.id}, 비밀번호 : ${this.passwd},
                 이름 : ${this.name}, 이메일 : ${this.email}<br>`)
            }
        }


        let user = new User();//클래스 괄호안에 값을 넘겨주면 값을 받고 초기화함
        // 4개다 지정할 필요없이 괄호안에 넣어두기만해도 간단하게 됨
        user.userinfo();

        // 4개의 변수를 각각 선언한 다음 값을 초기화함
        // let id = ''
        // let passwd = ''
        // let name = ''
        // let email = ''
    </script>

    <script>
        //생성자를 사용하지 않고 객체의 값을 초기화한다면?
        user = new User();
        user.id=`zxc123`;
        user.passwd=`a123456!`;
        user.naem=`abc`;
        user.email=`a123@naver.com`;

        document.write(user.id,`<br>`,user.passwd)
        //객체명.변수명 형식으로 값을 초기화할 수 있음
        //객체안의 선언된 변수를 외부에서
        //함부로 다루지 못하게 막을 필요 존재
    </script>

    <h2>setter/getter</h2>
    <p>캡슐화 : 객체에 선언된 변수나 함수가
        아무렇게나 접근하지 못하고 정해진 함수를 통해서만
        상호작용하도록 은닉화하는 것을 의미</p>
    <p>자바스크립트에서는 은닉화된 데이터에 접근하기 위해
        setter/getter 함수를 사용함</p>
    <p>하지만, 경우에 따라 setter 또는 getter만 만들어 쓰기도 함</p>

    <script>
        class User2 {
            _userid = '';
            #passwd = '';//private 속성으로 선언
            _name = '';
            _email = '';
            constructor(userid, passwd,name,email) {
                this._userid = userid;
                this.#passwd = passwd;
                this._name = name;
                this._email = email;
            }
        }

        // user = new User2();
        // user._userid = 'asd123';  에러발생 (이렇게 작성할 수 없다)
        // user.#passwd = '987zxc';  에러발생 (이렇게 작성할 수 없다)
        //private 속성으로 선언된 변수는
        //클래스 외부에서 접근할 수 없음
        //따라서, 값 조작도 불가
    </script>

    <script>
        user = new User3();
        user._userid = 'asd456';
        user.passwd = '987zxc';
        console.log(user._userid) //출력되고있음
        console.log(user.passwd)  //출력되고있음
        // private는 private값이 선언된 곳에서만 수정이 가능하고
        //추가로 지정한 값만 보여주지 처음 선언된 값을 모르게 하는 기능
    </script>

    <script>
        class User4 {
            #userid = '';
            #passwd = '';

            setUserid(userid) { //setter : set변수명(첫글자대문자)
                this.#userid = userid;
            }
            getUserid() { //getter : get변수명(첫글자대문자)
                return this.#userid
            }
        }
        user = new User4();
        user.setUserid('qwe123');
        document.write(user.getUserid(),`<br>`)
    </script>

    <script>
        //추천!!!!!!!
        class User5 {
            #userid = '';
            #passwd = '';

            set userid(userid) { //setter : set변수명(첫글자대문자)
                this.#userid = userid;
            }
            get userid() { //getter : get변수명(첫글자대문자)
                return this.#userid
            }
        }
        user = new User5();
        user.userid = 'xyz123';
        document.write(user.userid,`<br>`)
    </script>

    <script>
        class User6 {
            #userid = '';
            #passwd = '';

            set userid(userid) { //setter : set변수명(첫글자대문자)
                if(userid.length < 6){
                    document.write(`아이디가 짧아요!`)
                    return;//함수내에서 특정시점에 실행 중단
                }
                this.#userid = userid;
            }
            get userid() { //getter : get변수명(첫글자대문자)
                return this.#userid
            }
        }
        user = new User6();
        user.userid = 'xyz';
        document.write('[',user.userid,`] <br>`)
    </script>


    <h2>instanceof</h2>
    <p>어떤 객체가 특정 클래스에 속하는지 여부를 알 수 있음</p>

    <script>
        document.write(user instanceof User2, '<br>') //클래스에서 사용되었지만 같은 변수명을 재사용하게된다면 해당 클래스에 속하지 않고
        document.write(user instanceof User6, '<br>') //마지막에 만들어진 클래스로 사용했다면 해당 클래스에 속한다
    </script>

    <script>
        //학생이름과 성적들은 SungJuk이라는 객체에 저장
        //SungJukService객체의 computeSungJuk이라는 함수를 이용해서

        //총점,평균,학점을 처리하고
        //SungJuk객체의 showSungJuk 성적처리결과를 출력함
        class SungJuk {//값만 다루는 클래스 : VO,DTO
            #name = '';
            #kor = '';
            #eng = '';
            #math = '';
            #tot = 0;
            #avg = 0;
            #grade = '';

            constructor(name, kor, eng, math) {
                this.#name = name;
                this.#kor = kor;
                this.#eng = eng;
                this.#math = math;
                this.#tot = 0;
                this.#avg = 0;
                this.#grade = '';
            }
            set name(name) {this.#name = name;}
            get name() {return this.#name;}
            set kor(kor) {this.#kor = kor;}
            get kor() {return this.#kor;}
            set eng(eng) {this.#eng = eng;}
            get eng() {return this.#eng;}
            set math(math) {this.#math = math;}
            get math() {return this.#math;}
            set tot(tot) {this.#tot = tot;}
            get tot() {return this.#tot;}
            set avg(avg) {this.#avg = avg;}
            get avg() {return this.#avg;}
            set grade(grade) {this.#grade = grade;}
            get grade() {return this.#grade;}
            toString() { // 원래는 값만 다루는 클래스에서 출력을 담당도 한다
                return `이름 : ${this.#name} 국어 : ${this.#kor}, 영어 : ${this.#eng}, 수학 : ${this.#math}
                총점 : ${this.#tot}, 평균 : ${this.#avg}, 학점 : ${this.#grade}<br>`;
            }//toString은 객체가 가지고있는 정보나 값들을 문자열로 만들어 리턴하는 메소드
        }
        class SungJukService {//기능만 하는 클래스 : Service,DAO,Util
            computeSungJuk= function (sj) {
                sj.tot = sj.kor + sj.eng + sj.math
                sj.avg = parseInt(sj.tot / 3)

                switch (parseInt(sj.avg / 10)) {
                    case 10 : case 9 : sj.grade = '수'; break;
                    case 8 : sj.grade = '우'; break;
                    case 7 : sj.grade = '미'; break;
                    case 6 : sj.grade = '양'; break;
                    default : sj.grade = '가'; break;
                 }

            }
            showSungJuk = function (sj) {
                return `이름 : ${sj.name} 국어 : ${sj.kor}, 영어 : ${sj.eng}, 수학 : ${sj.math}
                총점 : ${sj.tot}, 평균 : ${sj.avg}, 학점 : ${sj.grade}<br>`;
            }
        }
        sj = new SungJuk('문동은',90,90,90)
        sj1 = new SungJuk('이사라',75,75,75)
        service = new SungJukService()

        service.computeSungJuk(sj);
        service.computeSungJuk(sj1);

        document.write(service.showSungJuk(sj));
        document.write(service.showSungJuk(sj1));

        document.write(sj);//write는 문자열로 출력하는 함수라서 toString()을 생략할 수 있다
        document.write(sj1);
    </script>
    <script src="js/13oop.js"></script>

    <script>
        sj2 = new SungJuk1('박혜진',65,55,50);
        SungJukService1.computeSungJuk(sj2) // 함수 호출만하지 출력을 하는것이 아니다
        document.write(sj2)//요건 출력이니 빠지면 화면에 보이지않음 필수라 생각해라
        //관련 라이브러리를 만들어서 사용하는 편이다(동작하는 클래스의경우)
    </script>
    <p></p>
</body>
</html>